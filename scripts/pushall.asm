; PUSHALL and POPALL test

MOV R2 22222
MOV R3 33333
MOV R4 44444
MOV R5 55555
MOV R6 66666
MOV R7 77777
MOV R8 88888
MOV R9 99999
MOV R10 101010
MOV R11 111111
MOV R12 121212
MOV R13 131313
MOV R14 141414
MOV R15 151515

;CALL :PRINTREG			; Should be numeric
PUSHU	; Doesn't push SP or PC!
;CALL :PRINTREG			; Should be numeric
CALL :MOVVAL
CALL :PRINTREG			; Should be numeric!
POPU
CALL :PRINTREG			; Should be numeric again

CALL :RETVAL
MOV $OUTPORTI R15
HLT

:MOVVAL
MOV R2 0
MOV R3 0
MOV R4 0
MOV R5 0
MOV R6 0
MOV R7 0
MOV R8 0
MOV R9 0
MOV R10 0
MOV R11 0
MOV R12 0
MOV R13 0
MOV R14 0
MOV R15 0
CALL :PRINTREG
RET


:PRINTREG
MOV $OUTPORTI R0
MOV $OUTPORTC ' '
MOV $OUTPORTI R1
MOV $OUTPORTC ' '
MOV $OUTPORTI R2
MOV $OUTPORTC ' '
MOV $OUTPORTI R3
MOV $OUTPORTC ' '
MOV $OUTPORTI R4
MOV $OUTPORTC ' '
MOV $OUTPORTI R5
MOV $OUTPORTC ' '
MOV $OUTPORTI R6
MOV $OUTPORTC ' '
MOV $OUTPORTI R7
MOV $OUTPORTC ' '
MOV $OUTPORTI R8
MOV $OUTPORTC ' '
MOV $OUTPORTI R9
MOV $OUTPORTC ' '
MOV $OUTPORTI R10
MOV $OUTPORTC ' '
MOV $OUTPORTI R11
MOV $OUTPORTC ' '
MOV $OUTPORTI R12
MOV $OUTPORTC ' '
MOV $OUTPORTI R13
MOV $OUTPORTC ' '
MOV $OUTPORTI R14
MOV $OUTPORTC ' '
MOV $OUTPORTI R15
RET

:RETVAL
MOV R15 98765
RET
